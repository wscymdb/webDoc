

# 1.Linux常用命令

## 1.1 Linux常见目录

| 目录      | 用途                                                         |
| --------- | ------------------------------------------------------------ |
| /         | 根目录(linux不像window还有C盘D盘)                            |
| /boot     | 启动目录，启动相关文件                                       |
| /dev      | 设备文件                                                     |
| /etc      | 配置文件                                                     |
| /home     | 普通用户的家目录，可以操作 (家目录就是每个用户都有自己的目录,这个目录就是该用户的家目录) |
| /lib      | 系统库保存目录                                               |
| /mnt      | 移动设备挂载目录                                             |
| /media    | 光盘挂载目录                                                 |
| /misc     | 磁带机挂载目录                                               |
| /root     | 超级用户的家目录，可以操作                                   |
| /tmp      | 临时目录，可以操作                                           |
| /proc     | 正在运行的内核信息映射，主要输出进程信息、内存资源信息和磁盘分区信息等等 |
| /sys      | 硬件设备的驱动程序信息                                       |
| /var      | 变量                                                         |
| /bin      | 普通的基本命令，如ls、ll、chmod等，普通用户也可以使用        |
| /sbin     | 基本的系统命令，如shutdown、reboot，用于启动系统，修复系统，只用管理员才能运行 |
| /usr/bin  | 是你在后期安装的一些软件的运行脚本                           |
| /usr/sbin | 放置一些用户安装的系统管理的必备程序                         |

## 1.2 命令基本格式

### 1.2.1 命令提示符

就是当我们登录到服务器后，终端会显现如下所示的一段提示符

```
[root@xxx ~]# 
```

* **root** 表示当前登录用户
* **xxx** 表示localhost 当前的主机名
* **~** 表示当前的工作目录，默认是当前用户的家目录， root用户就是/root，普通用户就是/home/用户名
* **\#** 表示提示符，超级用户是#，普通用户是$ 

### 1.2.2 命令格式

* 命令 [选项] [参数]
* 当有多个选项时，可以写在一起
* 一般参数有简化和完整写法两种，`-a`与`--all`等效

**举例**

```shell
# 多个选项放一起即可 -al
ls -al book
```

### 1.2.3 ls

* 查询目录中的内容

**语法**

```shell
# 默认当前目录下的文件列表
ls [选项] [文件或目录]
```

**选项**

* -a 显示所有文件，包括隐藏文件
* -l 显示详细信息
* -d 查看目录本身的属性而非自文件 (只查看文件夹本身不会查看文件夹下的子内容)
* -h 人性化的方式显示文件大小 （显示大小方便我们阅读）

**举例**

```shell
# 查看当前文件夹下的所有文件包含隐藏文件
ls -a

# 查看book文件夹下的所有文件包含隐藏文件
ls -a book

# 查看book文件夹的本身的详细信息 且文件大小以人性化的方式显示
ls -dhl book
```



**-l 属性**



用来显示详细信息



```shell
drwxr-xr-x 2 root root 31 4月  14 14:18 book
```

| drwxr-xr-x     | 2    | root   | root   | 31       | 4月  14 14:18 | book   |
| -------------- | ---- | ------ | ------ | -------- | ------------- | ------ |
| 文件类型和权限 |      | 所有者 | 所属组 | 文件大小 | 最后修改时间  | 文件名 |

## 1.3 文件处理命令

### 1.3.1 mkdir

* 建立目录 make directory

**语法**

```shell
mkdir [选项] [目录名]
```

**选项**

* -p 递归创建
  * mkdir a/b 如果不存在a那么就会报错
  * mkdir -p a/b 如果不存在a那么会先创建a 然后在创建b

**举例**

```shell
# 创建demo文件夹
mkdir demo

# 创建a文件下且a文件夹中创建b文件夹 如果不存在a就创建a
mkdir -p a/b
```



### 1.3.2 cd

* 切换所在目录 change directory

* 相对路径是参照当前所在目录

* 绝对路径是从根目录开始

* 按TAB键可以补全命令和目录

  

**语法**

```shell
cd [目录]
```



**目录选项**

* `～` 家目录
* `.` 当前目录
* `..` 上级目录
* `目录名`

**举例**

```shell
# 切换当a目录 相对路径
cd a

# 使用绝对路径
cd /usr/shar
```



### 1.3.3 pwd

* 打印当前的工作目录
* print working directory

```shell
pwd
```

### 1.3.4 rmdir

* 删除空目录 remove empty directory
* 如果目录下有文件是无法删除的

**语法**

```shell
rmdir [目录名]
```

**举例**

```shell
# 删除a文件夹
rmdir a

# 删除a文件夹下的b文件夹
rmdir a/b
```



### 1.3.5 rm

* 删除文件或目录

**语法**

```shell
rm [选项] [文件或目录]
```



**选项**

* -r 删除目录 
  * 会递归询问 比如a目录下有a.txt
  * 使用rm -r a 会先提示你是否进入a文件夹 然后在提示是否删除a.txt 最后在提示你是否删除a文件夹 你都需要去做交互
* -f 强制删除
  * rm -f 强制删除不用做交互效果



**举例**

```shell
# 强制删除hello目录下的所有文件包括hello文件夹
rm -rf hello
```



### 1.3.6 cp

* copy 复制命令

**语法**

```shell
cp [选项] [源文件或目录] [目标文件]
```



**选项**

* -r 复制目录，默认是复制文件
* -i 会在复制文件的时候给提示，如果复制的目标文件存在，会给你提示是否要覆盖提示，`默认就会提示`



**举例**

```shell
# 在当前目录复制a.txt 名称是b.txt
cp a.txt b.txt

# 复制a.txt 到book目录下 名称还是a.txt
cp a.txt book/

# 复制a.txt 到book目录下 名称是b.txt
cp a.txt book/b.txt

# 复制family目录 名称为ff 注意会复制family下的所有内容
cp -r family/ ff
```



### 1.3.7 mv

* 移动文件或者重命名 move

**语法**

```shell
mv [源文件或目录] [目标文件]
```

**举例**

```shell
# 如果移动后的位置还是当前的文件夹 那么就是重命名

 
# 重名称 本质就是剪切文件然后剪切后改名
mv a.txt a.md

# 移动文件到book文件夹下 名称还是a.txt
mv a.txt book/

# 移动文件到book文件夹下 名称改为c.txt
mv a.txt book/c.txt
```

### 1.3.8 ln

* 链接命令，生成链接文件 link

* 不加-s 就表示创建硬链接

  

**语法**

```shell
ln [选项] [源文件] [目标文件]

-s 创建软连接
```



**举例**

```shell
# 在当前目录下创建一个b.md的软链接 链接到book/b.md
ln -s book/b.md b.md
```

## 1.4 文件搜索命令

### 1.4.1 locate

* 在后台数据库中按文件名搜索，速度比较快
* 数据保存在`/var/lib/mlocate/mlocate.db`后台数据库，每天更新
  * 可以`updatedb`命令立刻更新数据库
  * 只能搜索文件名
* 需要安装mlocate  `yum -y install mlocate`

### 1.4.2 whereis

* 搜索 `命令所在路径`以及帮助文档所在位置



**语法**

```shell
whereis [选项] 命令名
```

**选项**

* -b 只查找可执行文件
* -m 只查找帮助文件

**举例**

```shell
# 查找cd命令的位置
whereis cd
```

### 1.4.3 which

* 可以看到别名

**举例**

```shell
# 查看ls命令所在位置 以及他的别名
which ls

# 输出
alias ls='ls --color=auto'
	/usr/bin/ls
```

### 1.4.4 环境变量

* 查看环境变量有哪些

**语法**

```shell
echo $PATH
```

### 1.4.5 find

* 文件搜索命令

**语法**

```shell
find [选项] [搜索范围] [搜索条件]
```

**选项**

* -name 按名称来搜索
* 通配符
* -i 忽略大小写
* -user 按所有者进行搜索
* -mtime 按时间搜索



#### **按名称搜索**

* 避免大范围的搜索，会非常消耗系统资源

```shell
# 搜索根目录下(/表示根目录)的所有名称是11.txt的文件
find / -name 11.txt
```

#### **通配符**

* 可以使用正则去匹配
* `*`匹配任意内容
* `?`匹配任意一个字符
* `[]`匹配任意一个中括号内的字符

```shell
# 在当前目录下找到符合匹配规则的文件
find . -name "ab[cdef].txt"
```

#### **不区分大小写**

* 因为linux是区分大小写的，所以可以使用`-i`(ignore)来忽略大小写

```shell
find . -iname "aB[cdef].txt"
```

#### **按所有者进行搜索**

```shell
# 查询root目录下所有者是root的文件
find /root -user root

# 查询root目录下没有所有者的文件
find /root -nouser
```

#### 按时间搜索

| 参数  | 含义             |
| ----- | ---------------- |
| atime | 文件访问时间     |
| ctime | 改变文件属性时间 |
| mtime | 修改文件内容时间 |



| 参数(5只是举例 表示天数) | 含义            |
| ------------------------ | --------------- |
| -5                       | 5天内修改的文件 |
| 5                        | 第5天修改的文件 |
| +5                       | 5天前修改的文件 |



```shell
# 在当前目录下查询 文件是5天前修改的文件
find . -mtime +5
```



#### 按文件大小搜索

* k要小写
* M要大写

| 参数 | 含义   |
| ---- | ------ |
| -8k  | 小于8K |
| 8k   | 等于8K |
| +8k  | 大于8K |
| +8M  | 小于8M |

```shell
# 在当前目录下查找大于8k的文件
find . -size +8k

# 在当前目录下查找大于8M的文件
find . -size +8M

# 在当前目录下查找大于8k且小于1M的文件
# -a 表示and 逻辑与 两个都满足
find . -size +8k -a -size -1M

# 在当前目录下查找大于1k或大于1M的文件
# -o 表示or 逻辑或 两个满足一个即可
find . -size -8k -o -size +1M

```

### 1.4.6 grep

* 在文件中寻找匹配的字符串

  * `-i` 忽略大小写
  * `-v` 排除指定字符串

  

```shell
# 在a.txt中寻找有a的字符串
grep a  a.txt 

# 在a.txt中寻找有a的字符串 且忽略大小写 
grep a -i a.txt 

# 在a.txt中寻找有除了a的所有字符串 且忽略大小写 
grep a -i -v a.txt 
```

 

## 1.5 压缩与解压命令

### 1.5.1 zip格式

* 如果文件特别小，压缩反而更大了，所以小文件不推荐压缩 

| 功能       | 命令                             |
| ---------- | -------------------------------- |
| 压缩文件   | zip 压缩文件名.zip 源文件        |
| 压缩文件夹 | zip -r 压缩文件夹名.zip 源文件夹 |
| 解压       | unzip 解压文件(夹)名.zip         |



**举例**

```shell
# 如果没有zip或者unzip就安装一下
yum install zip unzip

# 压缩msg.txt文件 msg11.zip表示要压缩过后的文件的名称
zip  msg11.zip  msg.txt

# 压缩book文件夹
zip book.zip book

# 解压book.zip
unzip book.zip
```



### 1.5.2 gzip

* gzip为高压缩，可以把文件压缩的更小
* gzip`不能压缩文件`夹只能压缩文件

**举例**

```shell
# 注意gzip压缩文件会把源文件干掉


# 压缩book.txt
gzip book.txt


# 压缩book.txt且保留源文件
# 使用-c命令
# -c会拿到gzip压缩book.txt返回的文件 然后使用 > 将返回值给到 book.txt.gz(自动创建)文件 所以就不会干掉源文件了
# 给的文件要使用后缀名加.gz  不然解压的时候去掉.gz后缀源文件就没有后缀了  book.txt.gz 
gzip -c book.txt > book.txt.gz


# 压缩目录
# 这里的压缩目录并不是真的压缩目录而是压缩该目录下的所有文件
# 使用-r命令
gzip -r book

# 解压 
# 使用 -d
gzip -d book.txt.gz
```

### 1.5.3 tar

* 打包命令，`只打包并不会压缩`

**选项**

* `-c` 打包
* `-x` 解包
* `-v` 显示过程
* `-f`指定打包后的文件名

**示例**

```shell
# 语法
tar -cvf 打包后的文件名 源文件

# 打包book文件夹为book.tar
# tar -cvf是tar -c -v -f 的简写
tar -cvf book book.tar

# 打包1.txt文件为1.txt.tar
tar -cvf 1.txt 1.txt.tar

# 解包
tar -xvf book.tar
```

### 1.5.4 tar.gz

* `zip`可以压缩目录，但是压缩效率不高，`gzip`压缩效率高但是不支持压缩目录
* 所以可以先打包为`.tar`，再压缩为`.gz`

**示例**

```shell
# -z 其实就表示gzip格式
# 其实就是先将文件夹压缩成.tar 然后再压缩成.gz
# 压缩book文件夹为gzip格式
tar -zcvf book.tar.gz  book

# 解压.tar.gz压缩包
tar -zxvf book.tar.gz
```

## 1.6 关机和重启命令

### 1.6.1 shutdown

* 关机命令 可以设置定时关机、重启

**选项**

* -c 取消前一个关机命令
* -h 关机
* -r 重启

**示例**

```shell
# 6点重启
shutdown -r 06:00

# 6点关机
shutdown -h 06:00

# 取消
shutdown -c
```

### 1.6.2 init

* 和shutdown差不多

```shell
# 关机
init 0

# 重启
init 6
```

### 1.6.3 logout

* 退出登录

```shell
logout
```

## 1.7 查看登录用户信息

### 1.7.1 w

* 查看登录用户信息

```shell
# 输入w即可
w

# 当输入后会显示如下的字段
# USER：登陆的用户名
# TTY：
# FROM：登陆的IP
# LOGIN@：登录的时间
# IDLE：用户闲置时间
# JCPU ：该终端所有进程占用的时间
# PCPU：当前进程所占用的时间
# WHAT：正在执行的命令
```

### 1.7.2 who

* w命令的简洁显示

```shell
who
```



### 1.7.3 last

* 查看当前登录和过去登录的信息

```shell
last
```



## 1.8 文件查看命令

### 1.8.1 cat

* 查看文件的所有内容

```shell
cat 1.txt
```

### 1.8.2 more

* 如果当前终端显示`不全会展示部分`，
* 按`空格键`继续往下展示，
* 按`b键`往上展示

```shell
more 1.txt
```

### 1.8.3 head

* `从头展示`多少行的内容

```shell
# 假设1.txt有20行内容 第一行是1 第二行是2 直到第20行是20

# 从头开始展示前5行的数据
head -5 1.txt

# 从头开始展示前8行的数据
head -8 1.txt
```

### 1.8.4 tail

* `从尾展示`多少行的内容
* `-f`表示follow意思，实时跟踪文件的变化

```shell
# 假设1.txt有20行内容 第一行是1 第二行是2 直到第20行是20

# 从尾开始展示后2行的数据 结果就是19 20
tail -2 1.txt


# 实时监控1.txt的变化
# 当对1.txt添加或删除内容的时候可以立马显示
tail -f 1.txt


# ｜表示管道符
# 显示前10行的内容 然后通过管道符给到后面 使用tail -2显示给的内容的后2行 所以结果是 9 10
head -10 1.txt | tail -2
```

### 
